<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.web.dao.ReviewMapper">
	<select id="reviewList" resultType="com.web.vo.ReviewVO">
		select * from review
	</select>

	<select id="getReviewByuserId" resultType="com.web.vo.ReviewVO">
		select * from review
		where REVIEWID = #{reviewid }
	</select>

	<insert id="ReviewInsert">
		insert into review
		values(review_seq.NEXTVAL,#{reviewid},#{userid},#{nickname},#{title},#{content},#{starrating},SYSDATE)
	</insert>

	<delete id="deleteReview">
		delete from review where reviewid=#{reviewid}
	</delete>


	<!-- 페이징 -->
	 <select id="getBoardList" resultType="com.web.vo.ReviewVO">
		SELECT * FROM (
		SELECT rownum as rn, seq, reviewid, userid, nickname, title, content, starrating, writedate
		FROM review
		)
		WHERE rn BETWEEN 1 AND 10
	</select> 

	<select id="getTotal" resultType="int">
		select count(*) from review
	</select>
	
	
	<select id="getListWithpaging" resultType="com.web.vo.ReviewVO">
		 <![CDATA[   
		select * from (
		select /*+ INDEX_DESC(REVIEW) */ ROWNUM as rn,seq,reviewid, userid, nickname, title, content, starrating, writedate
		from review
		where seq > 0 and rownum >0 and rownum <=(#{pageNum} * #{amount}) 
		)
		where rn >(#{pageNum} -1) * #{amount}
		]]>
	</select>
	
	
</mapper>